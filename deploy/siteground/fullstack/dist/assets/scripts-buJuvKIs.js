(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function i(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(e){if(e.ep)return;e.ep=!0;const r=i(e);fetch(e.href,r)}})();const Pe=[{id:1,name:"Premium Shoes",price:89.99,category:"footwear",image:"üëü",description:"Comfortable and stylish premium shoes"},{id:2,name:"Classic Shirt",price:34.99,category:"clothing",image:"üëï",description:"High-quality cotton shirt"},{id:3,name:"Denim Jeans",price:59.99,category:"clothing",image:"üëñ",description:"Classic blue denim jeans"},{id:4,name:"Winter Jacket",price:129.99,category:"outerwear",image:"üß•",description:"Warm and waterproof winter jacket"},{id:5,name:"Casual Hat",price:24.99,category:"accessories",image:"üß¢",description:"Comfortable casual baseball hat"},{id:6,name:"Leather Belt",price:44.99,category:"accessories",image:"‚åö",description:"Premium leather belt"},{id:7,name:"Sports Watch",price:199.99,category:"accessories",image:"‚åö",description:"Digital sports watch with timer"},{id:8,name:"Sunglasses",price:89.99,category:"accessories",image:"üòé",description:"UV-protected sunglasses"},{id:9,name:"Wool Sweater",price:74.99,category:"clothing",image:"üß∂",description:"Cozy wool sweater"},{id:10,name:"Running Shoes",price:99.99,category:"footwear",image:"üèÉ",description:"High-performance running shoes"},{id:11,name:"Gold Necklace",price:249.99,category:"jewelry",image:"‚õìÔ∏è",description:"Elegant 18k gold necklace with pendant"},{id:12,name:"Diamond Earrings",price:399.99,category:"jewelry",image:"üíé",description:"Premium diamond stud earrings"},{id:13,name:"Silver Ring",price:149.99,category:"jewelry",image:"üíç",description:"Stunning sterling silver ring"},{id:14,name:"Pearl Bracelet",price:179.99,category:"jewelry",image:"‚ú®",description:"Luxurious freshwater pearl bracelet"},{id:15,name:"Sapphire Pendant",price:299.99,category:"jewelry",image:"üîµ",description:"Beautiful blue sapphire pendant"}],_="adminToken",V="adminName";function D(){const n=localStorage.getItem(_);return n?String(n):""}function me(n,a){n&&localStorage.setItem(_,n),a&&localStorage.setItem(V,a)}function Oe(){localStorage.removeItem(_),localStorage.removeItem(V)}function K(){Oe(),typeof $=="function"&&$(),Z()}function ge(){return localStorage.getItem(V)||"Admin"}function Q(){return!!D()}function Z(){const n=Q();document.querySelectorAll("nav").forEach(a=>{const i=a.querySelector(".admin-manage-link"),c=a.querySelector(".admin-logout-link");if(!n){i&&i.remove(),c&&c.remove();return}if(!i){const e=document.createElement("a");e.href="admin.html",e.className="admin-manage-link",e.textContent="Admin Dashboard",a.appendChild(e)}if(!c){const e=document.createElement("a");e.href="#",e.className="admin-logout-link",e.textContent="Admin Logout",e.addEventListener("click",r=>{r.preventDefault(),K()}),a.appendChild(e)}})}async function C(n,a={}){const i=new AbortController,c=a.timeoutMs||3500,e=setTimeout(()=>i.abort(),c);try{const r={...a.headers||{}},o=await fetch(n,{...a,headers:r,signal:i.signal});if(!o.ok)return{ok:!1,status:o.status,data:null};const m=await o.json();return{ok:!0,status:o.status,data:m}}catch{return{ok:!1,status:0,data:null}}finally{clearTimeout(e)}}async function pe(){let n=await C("/api/products.php",{method:"GET"});return n.ok||(n=await C("/api/products",{method:"GET"})),!n.ok||!n.data||!Array.isArray(n.data.products)?null:n.data.products.map(a=>({...a,image:a.image||a.icon||"üì¶",icon:a.icon||a.image||"üì¶",imageUrl:typeof a.imageUrl=="string"?a.imageUrl:""}))}async function Me(){const n=await pe();if(!n)return!1;B=n;try{localStorage.setItem("products",JSON.stringify(B))}catch{}document.getElementById("products-container")&&T(B);const a=document.getElementById("featured-grid");return a&&(a.innerHTML="",ye()),!0}let B=[];function X(){const n=localStorage.getItem("products");n?B=JSON.parse(n).map(a=>({...a,icon:a.icon||a.image||"üì¶",image:a.image||a.icon||"üì¶",imageUrl:typeof a.imageUrl=="string"?a.imageUrl:""})):(B=JSON.parse(JSON.stringify(Pe)),localStorage.setItem("products",JSON.stringify(B)))}X();function F(){return"Shop is currently closed. Checkout is disabled."}const xe="Our website is currently under construction. Please check back soon.";function De(){if(document.getElementById("siteNotice"))return;const n=document.createElement("div");n.id="siteNotice",n.className="bg-light p-20 rounded-8 my-20",n.innerHTML=`<p class="text-muted"><strong>Notice:</strong> ${xe}</p>`;const a=document.querySelector("main");if(a){a.insertBefore(n,a.firstChild);return}const i=document.querySelector(".shop-controls");if(i&&i.parentElement){i.parentElement.insertBefore(n,i);return}const c=document.querySelector("header");c&&c.parentElement&&c.parentElement.insertBefore(n,c.nextSibling)}function Te(n){return n&&(n.icon||n.image)||"üì¶"}function $e(n){if(!n||typeof n.imageUrl!="string")return"";const a=n.imageUrl.trim();return a.startsWith("data:image/")?a:""}function j(n,a,i){if(!n)return;const c=$e(a);if(n.innerHTML="",c){const e=document.createElement("img");e.src=c,e.alt=i||(a==null?void 0:a.name)||"Product",e.loading="lazy",n.appendChild(e)}else n.textContent=Te(a)}class qe{constructor(){this.items=this.loadCart()}loadCart(){const a=localStorage.getItem("cart");return a?JSON.parse(a):[]}saveCart(){localStorage.setItem("cart",JSON.stringify(this.items))}addItem(a,i=1){{alert(F());return}}removeItem(a){this.items=this.items.filter(i=>i.id!==a),this.saveCart(),this.updateUI()}updateQuantity(a,i){{alert(F());return}}getTotal(){return this.items.reduce((a,i)=>a+i.price*i.quantity,0)}getCount(){return this.items.reduce((a,i)=>a+i.quantity,0)}clear(){this.items=[],this.saveCart(),this.updateUI()}updateUI(){const a=document.querySelectorAll("[data-cart-count]"),i=document.querySelectorAll("[data-cart-total]"),c=document.getElementById("cart-items"),e=document.querySelector("[data-cart-subtotal]");if(a.forEach(r=>r.textContent=this.getCount()),i.forEach(r=>r.textContent=this.getTotal().toFixed(2)),c)if(c.innerHTML="",this.items.length===0){const r=document.createElement("li");r.className="cart-empty",r.textContent="Your cart is empty",c.appendChild(r)}else this.items.forEach(r=>{const o=document.createElement("li");o.id="cart-item-"+r.id,o.className="cart-item";const m=document.createElement("div");m.className="cart-thumb",j(m,r,r.name);const u=document.createElement("div");u.className="cart-meta";const g=document.createElement("div");g.className="cart-title",g.textContent=r.name;const v=document.createElement("div");v.className="cart-line",v.innerHTML=`
                        <span class="cart-price">$${r.price.toFixed(2)}</span>
                        <span class="cart-qty">Qty ${r.quantity}</span>
                        <span class="cart-total">$${(r.price*r.quantity).toFixed(2)}</span>
                    `,u.appendChild(g),u.appendChild(v);const y=document.createElement("button");y.type="button",y.className="remove-btn",y.textContent="Remove",y.addEventListener("click",()=>this.removeItem(r.id)),o.appendChild(m),o.appendChild(u),o.appendChild(y),c.appendChild(o)});e&&(e.textContent=this.getTotal().toFixed(2))}}const H=new qe;function Ue(){localStorage.removeItem("checkout-items"),localStorage.removeItem("checkout-total")}function ee(){Ue(),H.clear()}ee();window.addEventListener("load",function(){X(),H.updateUI()});function T(n=B){const a=document.getElementById("products-container");a&&(a.innerHTML="",n.forEach(i=>{const c=document.createElement("div");c.className="product",c.innerHTML=`
            <div class="product-icon" data-product-media></div>
            <h3>${i.name}</h3>
            <p class="product-price">$${i.price.toFixed(2)}</p>
            <p class="product-description">${i.description}</p>
            <input type="number" id="qty-${i.id}" value="1" min="1" max="10" class="qty-input" disabled>
        `,j(c.querySelector("[data-product-media]"),i,i.name);const e=document.createElement("button");e.type="button",e.className="add-btn",e.textContent="Shop Closed",e.disabled=!0,c.appendChild(e),a.appendChild(c)}))}function Je(){const n=JSON.parse(localStorage.getItem("checkout-items")||"[]"),a=parseFloat(localStorage.getItem("checkout-total")||"0"),i=document.getElementById("order-summary");if(!i)return;if(i.innerHTML="<h2>Order Summary</h2>",n.length===0){i.innerHTML+="<p>No items in order.</p>";return}n.forEach(e=>{const r=document.createElement("div");r.className="order-item",r.innerHTML=`
            <span>${e.name}</span>
            <span>$${e.price.toFixed(2)} x ${e.quantity}</span>
            <span class="item-total">$${(e.price*e.quantity).toFixed(2)}</span>
        `,i.appendChild(r)});const c=document.createElement("div");c.className="order-total",c.innerHTML=`<strong>Total: $${a}</strong>`,i.appendChild(c)}function Re(){const n=document.getElementById("customer-name").value,a=document.getElementById("customer-email").value,i=document.getElementById("customer-address").value;if(!n||!a||!i){alert("Please fill in all fields");return}const c=new Date().toISOString(),e={id:"ORDER-"+Date.now(),customer:{name:n,email:a,address:i},items:JSON.parse(localStorage.getItem("checkout-items")||"[]"),total:parseFloat(localStorage.getItem("checkout-total")||"0"),date:new Date().toLocaleDateString(),createdAt:c,status:"placed"};let r=JSON.parse(localStorage.getItem("orders")||"[]");r.push(e),localStorage.setItem("orders",JSON.stringify(r)),C("/api/orders.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,items:e.items,total:e.total,customer:e.customer,status:e.status}),timeoutMs:6e3}).then(async o=>{o.ok||await C("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e.items,total:e.total,customer:e.customer,paymentMethod:"manual"}),timeoutMs:6e3})});try{const o=JSON.parse(localStorage.getItem("clients")||"[]"),m=String(a||"").trim().toLowerCase();if(m){const u=o.find(g=>String(g.email||"").trim().toLowerCase()===m);u?(u.name=n||u.name,u.address=i||u.address,u.totalOrders=Number(u.totalOrders||0)+1,u.totalSpend=Number(u.totalSpend||0)+Number(e.total||0),u.lastOrderId=e.id,u.lastOrderAt=c,u.updatedAt=c):o.push({id:"CLIENT-"+Date.now(),name:n,email:a,address:i,totalOrders:1,totalSpend:Number(e.total||0),lastOrderId:e.id,lastOrderAt:c,createdAt:c,updatedAt:c}),localStorage.setItem("clients",JSON.stringify(o))}}catch{}localStorage.removeItem("checkout-items"),localStorage.removeItem("checkout-total"),H.clear(),alert("Order placed successfully! Order ID: "+e.id),window.location.href="index.html"}function Fe(){if(document.getElementById("order-summary")){ee(),alert(F()),window.location.href="shop.html";return}const n=document.getElementById("checkoutBackBtn");n&&n.addEventListener("click",()=>{window.location.href="shop.html"});const a=document.getElementById("completePurchaseBtn");a&&a.addEventListener("click",Re)}window.addEventListener("load",function(){document.getElementById("products-container")&&T(),document.getElementById("order-summary")&&Je()});function je(){const n=document.querySelectorAll(".nav-dropdown > a");n.length&&(n.forEach(a=>{a.addEventListener("click",function(i){if(window.innerWidth<=768){i.preventDefault();const c=this.parentElement;c.classList.toggle("active"),document.querySelectorAll(".nav-dropdown").forEach(e=>{e!==c&&e.classList.remove("active")})}})}),document.addEventListener("click",function(a){a.target.closest(".nav-dropdown")||document.querySelectorAll(".nav-dropdown").forEach(i=>{i.classList.remove("active")})}))}function He(){const n=document.querySelector(".hamburger"),a=document.querySelector(".main-nav");!n||!a||(n.addEventListener("click",()=>{const i=n.getAttribute("aria-expanded")==="true";n.setAttribute("aria-expanded",!i),a.classList.toggle("active")}),document.addEventListener("click",i=>{i.target.closest("header")||(a.classList.remove("active"),n.setAttribute("aria-expanded","false"))}))}function ye(){const n=document.getElementById("heroShopBtn");n&&n.addEventListener("click",ue);const a=document.getElementById("featured-grid");if(!a)return;B.slice(0,6).forEach(c=>{const e=document.createElement("div");e.className="product-card",e.innerHTML=`
            <div class="product-card-content">
                <div class="product-icon" data-product-media></div>
                <h3>${c.name}</h3>
                <p class="product-price">$${c.price.toFixed(2)}</p>
            </div>
        `,j(e.querySelector("[data-product-media]"),c,c.name);const r=document.createElement("button");r.type="button",r.className="product-btn",r.textContent="View in Shop",r.addEventListener("click",ue),e.querySelector(".product-card-content").appendChild(r),a.appendChild(e)})}function ue(){window.location.href="shop.html"}function Ge(){const n=document.getElementById("searchInput"),a=document.getElementById("searchBtn"),i=document.querySelectorAll(".category-btn"),c=document.getElementById("checkout-btn"),e=document.getElementById("no-results");if(!n||!i.length)return;{const o=document.getElementById("header-cart");o&&(o.style.display="none");const m=document.querySelector(".cart-summary");m&&(m.style.display="none"),c&&(c.disabled=!0,c.textContent="Shop Closed")}function r(){const o=n.value.trim();if(!o){T(B),e&&e.classList.add("is-hidden");return}const m=B.filter(u=>u.name.toLowerCase().includes(o.toLowerCase())||u.description.toLowerCase().includes(o.toLowerCase()));T(m),e&&e.classList.toggle("is-hidden",m.length>0)}i.forEach(o=>{o.addEventListener("click",function(){i.forEach(u=>u.classList.remove("active")),this.classList.add("active");const m=this.getAttribute("data-category");T(m==="all"?B:B.filter(u=>u.category===m))})}),n.addEventListener("keypress",function(o){o.key==="Enter"&&r()}),a&&a.addEventListener("click",r),X(),T(B),H.updateUI(),$(),Me()}function $(){const n=document.getElementById("user-status");if(!n)return;const a=localStorage.getItem("currentUser"),i=localStorage.getItem("isGuest")==="true";if(n.innerHTML="",Q()){const c=document.createElement("span");c.textContent=`üõ°Ô∏è Admin: ${ge()}`;const e=document.createElement("a");e.href="admin.html",e.textContent="Manage Products";const r=document.createElement("a");r.href="#",r.textContent="Logout",r.addEventListener("click",o=>{o.preventDefault(),K()}),n.appendChild(c),n.appendChild(document.createTextNode(" ")),n.appendChild(e),n.appendChild(document.createTextNode(" ")),n.appendChild(r);return}if(a&&!i){const e=JSON.parse(a).email||"User",r=document.createElement("span");r.textContent=`üë§ Logged in as: ${e}`;const o=document.createElement("a");o.href="#",o.textContent="Logout",o.addEventListener("click",m=>{m.preventDefault(),Y()}),n.appendChild(r),n.appendChild(document.createTextNode(" ")),n.appendChild(o)}else if(i){const c=document.createElement("span");c.textContent="üö∂ Guest Mode";const e=document.createElement("a");e.href="#",e.textContent="Logout",e.addEventListener("click",r=>{r.preventDefault(),Y()}),n.appendChild(c),n.appendChild(document.createTextNode(" ")),n.appendChild(e)}else{const c=document.createElement("span");c.className="text-xs opacity-80",c.textContent="Not logged in",n.appendChild(c)}}function Y(){localStorage.removeItem("currentUser"),localStorage.removeItem("isGuest"),typeof $=="function"&&$(),fe()}function fe(){const n=localStorage.getItem("currentUser"),a=localStorage.getItem("isGuest")==="true",i=!!n||a;document.querySelectorAll("nav").forEach(c=>{const e=c.querySelector(".logout-link");if(!i){e&&e.remove();return}if(!e){const r=document.createElement("a");r.href="#",r.className="logout-link",r.textContent="Logout",r.addEventListener("click",o=>{o.preventDefault(),Y()}),c.appendChild(r)}})}function ze(){const n=document.getElementById("signupForm"),a=document.getElementById("loginForm");if(!n||!a)return;document.querySelectorAll(".auth-tab").forEach(o=>{o.addEventListener("click",function(){const m=this.getAttribute("data-tab");i(m)})});function i(o){document.querySelectorAll(".auth-tab").forEach(m=>m.classList.remove("active")),document.querySelectorAll(".auth-content").forEach(m=>m.classList.remove("active")),document.querySelector(`[data-tab="${o}"]`).classList.add("active"),document.getElementById(o).classList.add("active")}window.switchTab=i,document.querySelectorAll("[data-tab-target]").forEach(o=>{o.addEventListener("click",m=>{m.preventDefault();const u=o.getAttribute("data-tab-target");u&&i(u)})});const c=document.getElementById("signupPassword"),e=document.getElementById("passwordStrength");c&&e&&c.addEventListener("input",function(){const o=this.value;o.length<8?(e.textContent="‚ö†Ô∏è Weak - Minimum 8 characters",e.className="password-strength weak"):o.length<12||!/[A-Z]/.test(o)||!/[0-9]/.test(o)?(e.textContent="‚ö° Medium - Add uppercase and numbers",e.className="password-strength medium"):(e.textContent="‚úì Strong - Great password!",e.className="password-strength strong")}),n.addEventListener("submit",function(o){o.preventDefault();const m=document.getElementById("firstName").value,u=document.getElementById("lastName").value,g=document.getElementById("signupEmail").value,v=document.getElementById("signupPassword").value,y=document.getElementById("confirmPassword").value;if(v!==y){r("signupAlert","Passwords do not match!","error");return}if(v.length<8){r("signupAlert","Password must be at least 8 characters!","error");return}const I={id:"USER-"+Date.now(),firstName:m,lastName:u,email:g,password:btoa(v),phone:document.getElementById("phone").value,country:document.getElementById("country").value,createdAt:new Date().toISOString(),newsletter:document.getElementById("newsCheckbox").checked},w=JSON.parse(localStorage.getItem("accounts")||"[]");if(w.some(L=>L.email===g)){r("signupAlert","Email already registered!","error");return}w.push(I),localStorage.setItem("accounts",JSON.stringify(w)),localStorage.setItem("currentUser",JSON.stringify(I)),r("signupAlert","‚úì Account created successfully! Redirecting...","success"),setTimeout(()=>{window.location.href="shop.html"},2e3)}),a.addEventListener("submit",function(o){o.preventDefault();const m=document.getElementById("loginEmail").value,u=document.getElementById("loginPassword").value,v=JSON.parse(localStorage.getItem("accounts")||"[]").find(y=>y.email===m&&y.password===btoa(u));if(!v){r("loginAlert","Invalid email or password!","error");return}localStorage.setItem("currentUser",JSON.stringify(v)),r("loginAlert","‚úì Signed in successfully! Redirecting...","success"),setTimeout(()=>{window.location.href="shop.html"},2e3)}),window.continueAsGuest=function(){const o={id:"GUEST-"+Date.now(),name:"Guest User",isGuest:!0,createdAt:new Date().toISOString()};localStorage.setItem("currentUser",JSON.stringify(o)),window.location.href="shop.html"},document.querySelectorAll('[data-action="guest"]').forEach(o=>{o.addEventListener("click",m=>{m.preventDefault(),window.continueAsGuest()})});function r(o,m,u){const g=document.getElementById(o);g.textContent=m,g.className=`alert show ${u}`}}function We(){const n=document.getElementById("clientSignupForm"),a=document.getElementById("adminSignupForm");if(!n||!a)return;document.querySelectorAll(".auth-tab").forEach(o=>{o.addEventListener("click",function(){const m=this.getAttribute("data-tab");i(m)})});function i(o){document.querySelectorAll(".auth-tab").forEach(m=>m.classList.remove("active")),document.querySelectorAll(".auth-content").forEach(m=>m.classList.remove("active")),document.querySelector(`[data-tab="${o}"]`).classList.add("active"),document.getElementById(o).classList.add("active")}const c=window.location.hash.replace("#","");(c==="admin"||c==="client")&&i(c);function e(o,m,u){const g=document.getElementById(o);g.textContent=m,g.className=`alert show ${u}`}function r(o,m){const u=document.getElementById(o).value,g=document.getElementById(m);u.length<8?(g.textContent="Weak - minimum 8 characters",g.className="password-strength weak"):u.length<12||!/[A-Z]/.test(u)||!/[0-9]/.test(u)?(g.textContent="Medium - add uppercase and numbers",g.className="password-strength medium"):(g.textContent="Strong password",g.className="password-strength strong")}document.getElementById("clientPassword").addEventListener("input",()=>{r("clientPassword","clientPasswordStrength")}),document.getElementById("adminPassword").addEventListener("input",()=>{r("adminPassword","adminPasswordStrength")}),n.addEventListener("submit",function(o){o.preventDefault();const m=document.getElementById("clientFirstName").value,u=document.getElementById("clientLastName").value,g=document.getElementById("clientEmail").value,v=document.getElementById("clientPassword").value,y=document.getElementById("clientConfirmPassword").value;if(v!==y){e("clientAlert","Passwords do not match.","error");return}if(v.length<8){e("clientAlert","Password must be at least 8 characters.","error");return}const I={id:"USER-"+Date.now(),firstName:m,lastName:u,email:g,password:btoa(v),phone:document.getElementById("clientPhone").value,country:document.getElementById("clientCountry").value,createdAt:new Date().toISOString()},w=JSON.parse(localStorage.getItem("accounts")||"[]");if(w.some(L=>L.email===g)){e("clientAlert","Email already registered.","error");return}w.push(I),localStorage.setItem("accounts",JSON.stringify(w)),localStorage.setItem("currentUser",JSON.stringify(I)),e("clientAlert","Client account created. Redirecting...","success"),setTimeout(()=>{window.location.href="shop.html"},2e3)}),a.addEventListener("submit",function(o){o.preventDefault();const m=document.getElementById("adminFullName").value.trim(),u=document.getElementById("adminEmail").value.trim(),g=document.getElementById("adminPassword").value,v=document.getElementById("adminConfirmPassword").value;if(g!==v){e("adminAlert","Passwords do not match.","error");return}if(g.length<8){e("adminAlert","Password must be at least 8 characters.","error");return}const y={id:"ADMIN-"+Date.now(),username:m,email:u,password:btoa(g),createdAt:new Date().toISOString()},I=JSON.parse(localStorage.getItem("adminAccounts")||"[]"),w=m.toLowerCase(),L=u.toLowerCase();if(I.some(q=>q.username.toLowerCase()===w||q.email.toLowerCase()===L)){e("adminAlert","Admin account already exists.","error");return}I.push(y),localStorage.setItem("adminAccounts",JSON.stringify(I)),e("adminAlert","Admin account created. Redirecting...","success"),setTimeout(()=>{window.location.href="admin.html"},2e3)})}function Ye(){var re,ie;const n=document.getElementById("loginForm");if(!n)return;const a=[{username:"demo-admin",password:"demo-1234"},{username:"admin",password:"demo-1234"},{username:"administrator",password:"demo-1234"},{username:"administrater",password:"demo-1234"}];let i="Admin";const c=[{id:1,name:"Premium Shoes",price:89.99,category:"footwear",icon:"üëü",description:"Comfortable and stylish premium shoes"},{id:2,name:"Classic Shirt",price:34.99,category:"clothing",icon:"üëï",description:"High-quality cotton shirt"},{id:3,name:"Denim Jeans",price:59.99,category:"clothing",icon:"üëñ",description:"Classic blue denim jeans"},{id:4,name:"Winter Jacket",price:129.99,category:"outerwear",icon:"üß•",description:"Warm and waterproof winter jacket"},{id:5,name:"Casual Hat",price:24.99,category:"accessories",icon:"üß¢",description:"Comfortable casual baseball hat"},{id:6,name:"Leather Belt",price:44.99,category:"accessories",icon:"‚åö",description:"Premium leather belt"},{id:7,name:"Sports Watch",price:199.99,category:"accessories",icon:"‚åö",description:"Digital sports watch with timer"},{id:8,name:"Sunglasses",price:89.99,category:"accessories",icon:"üòé",description:"UV-protected sunglasses"},{id:9,name:"Wool Sweater",price:74.99,category:"clothing",icon:"üß∂",description:"Cozy wool sweater"},{id:10,name:"Running Shoes",price:99.99,category:"footwear",icon:"üèÉ",description:"High-performance running shoes"},{id:11,name:"Gold Necklace",price:249.99,category:"jewelry",icon:"‚õìÔ∏è",description:"Elegant 18k gold necklace with pendant"},{id:12,name:"Diamond Earrings",price:399.99,category:"jewelry",icon:"üíé",description:"Premium diamond stud earrings"},{id:13,name:"Silver Ring",price:149.99,category:"jewelry",icon:"üíç",description:"Stunning sterling silver ring"},{id:14,name:"Pearl Bracelet",price:179.99,category:"jewelry",icon:"‚ú®",description:"Luxurious freshwater pearl bracelet"},{id:15,name:"Sapphire Pendant",price:299.99,category:"jewelry",icon:"üîµ",description:"Beautiful blue sapphire pendant"}];let e=[],r="",o="";function m(s){return new Promise((t,d)=>{const l=new FileReader;l.onload=()=>t(String(l.result||"")),l.onerror=d,l.readAsDataURL(s)})}function u(s,t,d){if(!s)return;const l=typeof t=="string"?t.trim():"";if(!l){s.classList.add("is-hidden"),s.innerHTML="";return}s.classList.remove("is-hidden"),s.innerHTML="";const p=document.createElement("img");p.src=l,p.alt=d||"Product photo preview",p.loading="lazy",s.appendChild(p)}function g(){const s=localStorage.getItem("products");if(s)try{e=JSON.parse(s).map(t=>({...t,icon:t.icon||t.image||"üì¶",imageUrl:typeof t.imageUrl=="string"?t.imageUrl:""}));return}catch(t){console.error("Invalid products data in localStorage",t)}e=JSON.parse(JSON.stringify(c)),v()}function v(){localStorage.setItem("products",JSON.stringify(e))}function y(s,t,d="success"){const l=document.getElementById(s);l&&(l.textContent=t,l.className=`message ${d}`,l.style.display="block",setTimeout(()=>l.style.display="none",4500))}function I(s){try{const t=JSON.parse(s||"[]");return Array.isArray(t)?t:[]}catch{return[]}}function w(s){const t=Number(s);return Number.isFinite(t)?`$${t.toFixed(2)}`:"$0.00"}function L(s){const t=String(s??"");return/[\n",]/.test(t)?`"${t.replace(/"/g,'""')}"`:t}function q(s,t){const d=t.map(E=>E.map(L).join(",")).join(`
`),l=new Blob([d],{type:"text/csv;charset=utf-8;"}),p=URL.createObjectURL(l),f=document.createElement("a");f.href=p,f.download=s,document.body.appendChild(f),f.click(),f.remove(),URL.revokeObjectURL(p)}function G(s,t,d){const l=document.createElement("tr"),p=document.createElement("td");p.colSpan=t,p.className="table-empty",p.textContent=d,l.appendChild(p),s.appendChild(l)}function he(s){return s.trim().toLowerCase()}function Ee(s,t){const d=he(s);return a.find(f=>f.username===d&&f.password===t)?{username:s}:JSON.parse(localStorage.getItem("adminAccounts")||"[]").find(f=>{const E=f.username&&f.username.toLowerCase()===d,A=f.email&&f.email.toLowerCase()===d;return(E||A)&&f.password===btoa(t)})}async function ve(s,t){let d=await C("/api/admin_login.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:t}),timeoutMs:4500});return d.ok||(d=await C("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:t}),timeoutMs:4500})),!d.ok||!d.data||!d.data.token?null:String(d.data.token)}function z(){document.getElementById("adminNameDisplay").textContent=i,document.getElementById("loginScreen").style.display="none",document.getElementById("dashboard").style.display="block",k()}async function te(){const s=await pe();return s?(e=s.map(t=>({...t,icon:t.icon||t.image||"üì¶",image:t.image||t.icon||"üì¶"})),!0):!1}const Se=async function(s){s.preventDefault();const t=document.getElementById("adminName").value.trim(),d=document.getElementById("adminPassword").value.trim(),l=document.getElementById("loginMessage"),p=await ve(t,d);if(p){i=t||"Admin",me(p,i),await te(),z();return}const f=Ee(t,d);if(!f){l.textContent="Incorrect username or password",l.className="message error",l.style.display="block",document.getElementById("adminPassword").value="",document.getElementById("adminPassword").focus();return}i=f.username||t||"Admin",me("local-demo",i),z()},Ie=function(){confirm("Are you sure you want to logout?")&&(K(),document.getElementById("dashboard").style.display="none",document.getElementById("loginScreen").style.display="block",document.getElementById("adminName").value="",document.getElementById("adminPassword").value="",document.getElementById("loginMessage").style.display="none")};n.addEventListener("submit",Se);function we(){const s=["üëï","üëñ","üëü","üß•","üß¢","üï∂Ô∏è","‚åö","üíç","üíé","üëú","üé®","‚ú®","üî•","üåü","üëë","üß£","üèÉ","‚õìÔ∏è","üß∏","üì¶"],t=document.getElementById("iconPicker");t&&(t.innerHTML="",s.forEach(d=>{const l=document.createElement("div");l.className="icon-option",l.textContent=d,l.addEventListener("click",()=>{document.querySelectorAll("#iconPicker .icon-option").forEach(p=>p.classList.remove("selected")),l.classList.add("selected"),document.getElementById("productIcon").value=d}),t.appendChild(l)}))}(re=document.getElementById("addProductForm"))==null||re.addEventListener("submit",s=>{s.preventDefault();const t=document.getElementById("productName").value.trim(),d=parseFloat(document.getElementById("productPrice").value),l=document.getElementById("productCategory").value,p=document.getElementById("productIcon").value.trim()||"üì¶",f=document.getElementById("productDescription").value.trim();if(!t||isNaN(d)||d<=0||!l||!f){y("addMessage","Please fill all required fields correctly","error");return}const E={id:Date.now(),name:t,price:d,category:l,icon:p,image:p,imageUrl:r||"",description:f},A=D();A&&A!=="local-demo"?C("/api/products.php",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({name:E.name,price:E.price,category:E.category,icon:E.icon,imageUrl:E.imageUrl||"",description:E.description}),timeoutMs:6e3}).then(async h=>{if(h.ok||(h=await C("/api/products",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({name:E.name,price:E.price,category:E.category,icon:E.icon,imageUrl:E.imageUrl||"",description:E.description}),timeoutMs:6e3})),!h.ok||!h.data||!h.data.product){y("addMessage","Could not add product (server).","error");return}e.push({...h.data.product,image:h.data.product.icon||"üì¶"}),y("addMessage","Product added successfully!","success"),k()}):(e.push(E),v(),y("addMessage","Product added successfully!","success"),k()),s.target.reset(),document.querySelectorAll("#iconPicker .icon-option").forEach(h=>h.classList.remove("selected")),r="";const b=document.getElementById("productImage");b&&(b.value=""),u(document.getElementById("productImagePreview"),"","")});function k(){const s=document.getElementById("productsBody");if(s){if(s.innerHTML="",e.length===0){s.innerHTML='<tr><td colspan="6" class="table-empty">No products added yet</td></tr>';return}e.forEach(t=>{const d=document.createElement("tr");d.innerHTML=`
                <td class="product-icon" data-product-media></td>
                <td>${t.name}</td>
                <td>$${t.price.toFixed(2)}</td>
                <td>${t.category}</td>
                <td title="${t.description.replace(/"/g,"&quot;")}">
                    ${t.description.substring(0,60)}${t.description.length>60?"...":""}
                </td>
                <td></td>
            `,j(d.querySelector("[data-product-media]"),t,t.name);const l=d.querySelector("td:last-child"),p=document.createElement("button");p.className="action-btn edit-btn",p.type="button",p.textContent="Edit",p.setAttribute("data-action","edit"),p.setAttribute("data-id",t.id);const f=document.createElement("button");f.className="action-btn delete-btn",f.type="button",f.textContent="Delete",f.setAttribute("data-action","delete"),f.setAttribute("data-id",t.id),l.appendChild(p),l.appendChild(f),s.appendChild(d)})}}document.querySelectorAll(".tab-btn").forEach(s=>{s.addEventListener("click",()=>{document.querySelectorAll(".tab-btn").forEach(t=>t.classList.remove("active")),document.querySelectorAll(".tab-content").forEach(t=>t.classList.remove("active")),s.classList.add("active"),document.getElementById(s.dataset.tab).classList.add("active"),s.dataset.tab==="manage"&&k(),s.dataset.tab==="sales"&&Ae()})});let U=[];async function ne(){const s=D();if(s&&s!=="local-demo"){let d=await C("/api/orders.php",{method:"GET",headers:{Authorization:`Bearer ${s}`},timeoutMs:6e3});if(d.ok||(d=await C("/api/admin/orders",{method:"GET",headers:{Authorization:`Bearer ${s}`},timeoutMs:6e3})),d.ok&&d.data&&Array.isArray(d.data.orders))return d.data.orders.map(l=>({id:l.id,createdAt:l.createdAt||"",date:l.createdAt?new Date(l.createdAt).toLocaleDateString():"",customer:l.customer||{},total:Number(l.total||0),status:l.status||"unknown",paymentMethod:l.paymentMethod||""}))}return I(localStorage.getItem("orders")).map(d=>({id:d.id,createdAt:d.createdAt||"",date:d.date||(d.createdAt?new Date(d.createdAt).toLocaleDateString():""),customer:d.customer||{},total:Number(d.total||0),status:d.status||"placed",paymentMethod:d.paymentMethod||""}))}function Ce(s){var d,l,p;const t=new Map;for(const f of s){const E=String(((d=f.customer)==null?void 0:d.email)||"").trim();if(!E)continue;const A=E.toLowerCase(),b=t.get(A)||{name:String(((l=f.customer)==null?void 0:l.name)||"").trim(),email:E,totalOrders:0,totalSpend:0,lastOrderAt:""};b.totalOrders+=1,b.totalSpend+=Number(f.total||0);const h=f.createdAt||"";h&&(!b.lastOrderAt||h>b.lastOrderAt)&&(b.lastOrderAt=h),b.name||(b.name=String(((p=f.customer)==null?void 0:p.name)||"").trim()),t.set(A,b)}return Array.from(t.values()).sort((f,E)=>(E.lastOrderAt||"").localeCompare(f.lastOrderAt||""))}function be(s){const t=D();t&&t!=="local-demo"&&C("/api/clients.php",{method:"GET",headers:{Authorization:`Bearer ${t}`},timeoutMs:6e3}).then(l=>{if(l.ok&&l.data&&Array.isArray(l.data.clients))try{localStorage.setItem("clients",JSON.stringify(l.data.clients))}catch{}});const d=I(localStorage.getItem("clients")).map(l=>({name:l.name||"",email:l.email||"",totalOrders:Number(l.totalOrders??0),totalSpend:Number(l.totalSpend??0),lastOrderAt:l.lastOrderAt||l.updatedAt||""})).filter(l=>l.email);return d.length?d.sort((l,p)=>(p.lastOrderAt||"").localeCompare(l.lastOrderAt||"")):Ce(s)}function Be(){const s=D();return s&&s!=="local-demo"&&C("/api/messages.php",{method:"GET",headers:{Authorization:`Bearer ${s}`},timeoutMs:6e3}).then(t=>{if(t.ok&&t.data&&Array.isArray(t.data.messages))try{localStorage.setItem("messages",JSON.stringify(t.data.messages))}catch{}}),I(localStorage.getItem("messages")).map(t=>({createdAt:t.createdAt||"",name:t.name||"",email:t.email||"",subject:t.subject||"",message:t.message||""}))}async function Ae(){const s=document.getElementById("salesSummary"),t=document.getElementById("ordersBody"),d=document.getElementById("clientsBody"),l=document.getElementById("messagesBody");if(!s||!t||!d||!l)return;t.innerHTML="",d.innerHTML="",l.innerHTML="";const p=await ne(),f=be(p),E=Be();U=p;const A=p.length,b=p.reduce((h,S)=>h+Number(S.total||0),0);s.textContent=`Total Orders: ${A} ‚Ä¢ Revenue: ${w(b)} ‚Ä¢ Clients: ${f.length} ‚Ä¢ Messages: ${E.length}`,p.length?p.slice().sort((h,S)=>(S.createdAt||"").localeCompare(h.createdAt||"")).forEach(h=>{var de,le;const S=document.createElement("tr"),N=document.createElement("td");N.textContent=h.id||"";const P=document.createElement("td");P.textContent=h.createdAt?new Date(h.createdAt).toLocaleString():h.date||"";const O=document.createElement("td"),M=String(((de=h.customer)==null?void 0:de.name)||"").trim(),x=String(((le=h.customer)==null?void 0:le.email)||"").trim();O.textContent=x?`${M||"Customer"} (${x})`:M||"Customer";const ce=document.createElement("td");ce.textContent=w(h.total);const se=document.createElement("td");se.textContent=h.status||"",S.appendChild(N),S.appendChild(P),S.appendChild(O),S.appendChild(ce),S.appendChild(se),t.appendChild(S)}):G(t,5,"No orders yet"),f.length?f.forEach(h=>{const S=document.createElement("tr"),N=document.createElement("td");N.textContent=h.name||"Client";const P=document.createElement("td");P.textContent=h.email||"";const O=document.createElement("td");O.textContent=String(Number(h.totalOrders||0));const M=document.createElement("td");M.textContent=w(h.totalSpend);const x=document.createElement("td");x.textContent=h.lastOrderAt?new Date(h.lastOrderAt).toLocaleString():"",S.appendChild(N),S.appendChild(P),S.appendChild(O),S.appendChild(M),S.appendChild(x),d.appendChild(S)}):G(d,5,"No clients yet"),E.length?E.slice().sort((h,S)=>(S.createdAt||"").localeCompare(h.createdAt||"")).forEach(h=>{const S=document.createElement("tr"),N=document.createElement("td");N.textContent=h.createdAt?new Date(h.createdAt).toLocaleString():"";const P=document.createElement("td");P.textContent=h.name||"";const O=document.createElement("td");O.textContent=h.email||"";const M=document.createElement("td");M.textContent=h.subject||"";const x=document.createElement("td");x.textContent=h.message||"",S.appendChild(N),S.appendChild(P),S.appendChild(O),S.appendChild(M),S.appendChild(x),l.appendChild(S)}):G(l,5,"No messages yet")}const ae=document.getElementById("exportOrdersCsvBtn");ae&&ae.addEventListener("click",async()=>{U.length||(U=await ne());const s=[["orderId","createdAt","customerName","customerEmail","total","status","paymentMethod"],...U.map(t=>{var d,l;return[t.id||"",t.createdAt||"",String(((d=t.customer)==null?void 0:d.name)||""),String(((l=t.customer)==null?void 0:l.email)||""),Number(t.total||0).toFixed(2),t.status||"",t.paymentMethod||""]})];q("orders.csv",s),y("salesMessage","Exported orders.csv","success")});const Le=function(s){const t=e.find(l=>l.id===s);if(!t)return;document.getElementById("editId").value=t.id,document.getElementById("editName").value=t.name,document.getElementById("editPrice").value=t.price,document.getElementById("editCategory").value=t.category,document.getElementById("editIcon").value=t.icon,document.getElementById("editDescription").value=t.description,o="";const d=document.getElementById("editImage");d&&(d.value=""),u(document.getElementById("editImagePreview"),t.imageUrl||"",t.name),document.getElementById("editModal").classList.add("active")},W=function(){document.getElementById("editModal").classList.remove("active")};(ie=document.getElementById("editForm"))==null||ie.addEventListener("submit",s=>{s.preventDefault();const t=Number(document.getElementById("editId").value),d=e.find(E=>E.id===t);if(!d)return;d.name=document.getElementById("editName").value.trim(),d.price=parseFloat(document.getElementById("editPrice").value),d.category=document.getElementById("editCategory").value;const l=document.getElementById("editIcon").value.trim()||"üì¶";d.icon=l,d.image=l,d.description=document.getElementById("editDescription").value.trim(),o&&(d.imageUrl=o);const p=D(),f={name:d.name,price:d.price,category:d.category,icon:d.icon,imageUrl:d.imageUrl||"",description:d.description};if(p&&p!=="local-demo"){C(`/api/products.php?id=${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify(f),timeoutMs:6e3}).then(async E=>{if(E.ok||(E=await C(`/api/products/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify(f),timeoutMs:6e3})),!E.ok){y("manageMessage","Could not update product (server).","error");return}W(),k(),y("manageMessage","Product updated successfully","success")});return}v(),W(),k(),y("manageMessage","Product updated successfully","success")});const ke=function(s){if(!confirm("Delete this product permanently?"))return;const t=D();if(t&&t!=="local-demo"){C(`/api/products.php?id=${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`},timeoutMs:6e3}).then(async d=>{if(d.ok||(d=await C(`/api/products/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`},timeoutMs:6e3})),!d.ok){y("manageMessage","Could not delete product (server).","error");return}e=e.filter(l=>l.id!==s),k(),y("manageMessage","Product deleted successfully","success")});return}e=e.filter(d=>d.id!==s),v(),k(),y("manageMessage","Product deleted successfully","success")},Ne=function(){confirm("Reset all products to the default list? This will overwrite current products.")&&(e=JSON.parse(JSON.stringify(c)),v(),k(),y("manageMessage","Products reset to defaults","success"))};document.querySelectorAll('[data-action="reset-products"]').forEach(s=>{s.addEventListener("click",Ne)}),document.querySelectorAll('[data-action="logout-admin"]').forEach(s=>{s.addEventListener("click",Ie)}),document.querySelectorAll('[data-action="close-modal"]').forEach(s=>{s.addEventListener("click",W)});const oe=document.getElementById("productsBody");oe&&oe.addEventListener("click",s=>{const t=s.target.closest("button[data-action][data-id]");if(!t)return;const d=t.getAttribute("data-action"),l=Number(t.getAttribute("data-id"));l&&(d==="edit"?Le(l):d==="delete"&&ke(l))}),Q()?(i=ge(),te().then(s=>{s||g(),z()})):g(),we(),Z();const J=document.getElementById("productImage");J&&J.addEventListener("change",async()=>{const s=J.files&&J.files[0];if(!s){r="",u(document.getElementById("productImagePreview"),"","");return}try{const t=await m(s);r=t,u(document.getElementById("productImagePreview"),t,"New product photo")}catch(t){console.error("Unable to read product image",t),r="",u(document.getElementById("productImagePreview"),"",""),y("addMessage","Could not read the selected image file.","error")}});const R=document.getElementById("editImage");R&&R.addEventListener("change",async()=>{const s=R.files&&R.files[0];if(!s){o="";return}try{const t=await m(s);o=t,u(document.getElementById("editImagePreview"),t,"Updated product photo")}catch(t){console.error("Unable to read edit image",t),o="",y("manageMessage","Could not read the selected image file.","error")}})}function _e(){const n=document.getElementById("auctions-grid");if(!n)return;const a=[{id:101,name:"Vintage Gold Watch",image:"‚åö",currentBid:450,startingBid:100,bids:12,timeRemaining:"2h 30m"},{id:102,name:"Rare Collectible Coins Set",image:"ü™ô",currentBid:850,startingBid:200,bids:28,timeRemaining:"5h 15m"},{id:103,name:"Antique Silver Mirror",image:"ü™û",currentBid:320,startingBid:50,bids:8,timeRemaining:"1h 45m"},{id:104,name:"Limited Edition Handbag",image:"üëú",currentBid:1200,startingBid:300,bids:35,timeRemaining:"3h 20m"},{id:105,name:"Vintage Camera Collection",image:"üì∑",currentBid:680,startingBid:150,bids:18,timeRemaining:"4h 10m"},{id:106,name:"Rare Vinyl Records Bundle",image:"üéµ",currentBid:520,startingBid:100,bids:22,timeRemaining:"6h 45m"}];function i(){n.innerHTML="",a.forEach(e=>{const r=document.createElement("div");r.className="auction-item",r.innerHTML=`
                <div class="item-image">${e.image}</div>
                <div class="item-content">
                    <h3>${e.name}</h3>
                    <p>üë• ${e.bids} bids</p>
                    <div class="current-bid">Current: $${e.currentBid}</div>
                    <p>Starting: $${e.startingBid}</p>
                    <div class="time-remaining">‚è±Ô∏è ${e.timeRemaining}</div>
                </div>
            `;const o=document.createElement("button");o.type="button",o.className="bid-btn",o.textContent="Place Bid",o.setAttribute("data-id",e.id),r.querySelector(".item-content").appendChild(o),n.appendChild(r)})}function c(e){const r=a.find(m=>m.id===e),o=prompt(`Enter your bid amount (Current: $${r.currentBid}):`,r.currentBid+50);o&&o>r.currentBid?(r.currentBid=o,r.bids++,i(),alert("Bid placed successfully! You are the highest bidder.")):o&&alert("Your bid must be higher than the current bid.")}n.addEventListener("click",e=>{const r=e.target.closest(".bid-btn");if(!r)return;const o=Number(r.getAttribute("data-id"));o&&c(o)}),i()}function Ve(){const n=document.getElementById("paintings-grid");if(!n)return;const a=[{id:201,title:"Sunset Over Mountains",artist:"Leonardo Rossi",year:2023,price:2500,category:"landscape",image:"üèîÔ∏è",description:"A breathtaking oil painting capturing the golden hour over majestic mountain peaks."},{id:202,title:"Abstract Symphony",artist:"Maria Chen",year:2024,price:1800,category:"abstract",image:"üé®",description:"Contemporary abstract piece exploring color and form in harmonious balance."},{id:203,title:"Modern Reflections",artist:"James Mitchell",year:2023,price:3200,category:"modern",image:"ü™û",description:"Mixed media artwork combining traditional techniques with contemporary themes."},{id:204,title:"Forest Path",artist:"Elena Rossi",year:2024,price:1950,category:"landscape",image:"üå≤",description:"Serene landscape painting depicting a winding path through ancient forests."},{id:205,title:"Portrait of Grace",artist:"Antonio Moretti",year:2023,price:4500,category:"portrait",image:"üë§",description:"Stunning portrait capturing the essence and beauty of its subject."},{id:206,title:"Urban Geometry",artist:"Sofia Petrov",year:2024,price:2200,category:"modern",image:"üèôÔ∏è",description:"Contemporary interpretation of urban architecture and city life."},{id:207,title:"Ocean Waves",artist:"Marco Bellini",year:2023,price:2100,category:"landscape",image:"üåä",description:"Dynamic seascape capturing the power and beauty of ocean waves."},{id:208,title:"Colorful Dreams",artist:"Yuki Tanaka",year:2024,price:1600,category:"abstract",image:"üí≠",description:"Vibrant abstract composition exploring the realm of imagination."},{id:209,title:"Classical Beauty",artist:"Isabella Romano",year:2023,price:3800,category:"portrait",image:"üé≠",description:"Elegant portrait in classical style with timeless beauty."},{id:210,title:"Neon Nights",artist:"David Chen",year:2024,price:2400,category:"modern",image:"üåÉ",description:"Modern digital art piece featuring vibrant neon colors and urban aesthetic."}];let i="all";function c(g="all"){n.innerHTML="",(g==="all"?a:a.filter(y=>y.category===g)).forEach(y=>{const I=document.createElement("div");I.className="painting-card",I.innerHTML=`
                <div class="painting-image">${y.image}</div>
                <div class="painting-info">
                    <h3>${y.title}</h3>
                    <div class="artist">by ${y.artist}</div>
                    <div class="year">${y.year}</div>
                    <div class="painting-price">$${y.price}</div>
                    <p class="painting-desc">${y.description}</p>
                </div>
            `,I.addEventListener("click",()=>r(y));const w=document.createElement("button");w.type="button",w.className="view-btn",w.textContent="View Details",w.addEventListener("click",L=>{L.stopPropagation(),r(y)}),I.querySelector(".painting-info").appendChild(w),n.appendChild(I)})}function e(g){document.querySelectorAll(".filters button").forEach(v=>v.classList.remove("active")),g&&g.classList.add("active")}function r(g){const v=document.getElementById("paintingModal"),y=document.getElementById("modalContent");y.innerHTML=`
            <h2>${g.title}</h2>
            <div class="painting-emoji">${g.image}</div>
            <p><strong>Artist:</strong> ${g.artist}</p>
            <p><strong>Year:</strong> ${g.year}</p>
            <p><strong>Price:</strong> <span class="price-highlight">$${g.price}</span></p>
            <p><strong>Description:</strong> ${g.description}</p>
            <button class="view-btn mt-20" id="paintingAddToCart">Add to Cart</button>
        `;const I=document.getElementById("paintingAddToCart");I&&I.addEventListener("click",()=>{alert("Added to cart! Price: $"+g.price)}),v.style.display="block"}function o(){document.getElementById("paintingModal").style.display="none"}document.querySelectorAll(".filters button").forEach(g=>{g.addEventListener("click",()=>{const v=g.getAttribute("data-category")||"all";i=v,e(g),c(v)})});const m=document.getElementById("paintingModal"),u=document.getElementById("paintingModalClose");m&&m.addEventListener("click",g=>{g.target===m&&o()}),u&&u.addEventListener("click",o),c(i)}function Ke(){const n=document.getElementById("contactForm");n&&n.addEventListener("submit",function(a){a.preventDefault();try{const i=new FormData(n),c={id:"MSG-"+Date.now(),name:String(i.get("name")||"").trim(),email:String(i.get("email")||"").trim(),subject:String(i.get("subject")||"").trim(),message:String(i.get("message")||"").trim(),status:"new",createdAt:new Date().toISOString()},e=JSON.parse(localStorage.getItem("messages")||"[]");e.unshift(c),localStorage.setItem("messages",JSON.stringify(e)),C("/api/messages.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:c.id,name:c.name,email:c.email,subject:c.subject,message:c.message}),timeoutMs:6e3})}catch{}alert("Thank you for your message! We will get back to you soon."),a.target.reset()})}function Qe(){if(!document.getElementById("orderId"))return;function a(){try{const r=new URLSearchParams(window.location.search).get("orderId")||"ORDER-"+Date.now(),o=localStorage.getItem("checkout-total")||"0.00",m=JSON.parse(localStorage.getItem("customer-info")||"{}");document.getElementById("orderId").textContent=r,document.getElementById("orderDate").textContent=new Date().toLocaleDateString(),document.getElementById("orderTotal").textContent="$"+parseFloat(o).toFixed(2),document.getElementById("emailConfirm").textContent=m.email||"Check your email",document.getElementById("shippingAddress").textContent=`${m.address||"Your address"}, ${m.city||""} ${m.state||""} ${m.zip||""}`,localStorage.removeItem("checkout-items"),localStorage.removeItem("checkout-total")}catch(e){console.error("Error loading order details:",e)}}function i(){const r=new URLSearchParams(window.location.search).get("orderId")||"ORDER-"+Date.now(),o=`
            threepeakviews.com - ORDER RECEIPT
            ================================
            Order ID: ${r}
            Date: ${new Date().toLocaleString()}

            Thank you for your purchase!

            To download your full receipt, please log in to your account
            or check your email for the detailed receipt.

            Questions? Contact: support@threepeakviews.com
        `,m=document.createElement("a");m.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(o)),m.setAttribute("download",`receipt-${r}.txt`),m.style.display="none",document.body.appendChild(m),m.click(),document.body.removeChild(m)}const c=document.getElementById("downloadReceiptBtn");c&&c.addEventListener("click",i),a()}function Ze(){if(document.getElementById("checkout-form")){ee(),alert(F()),window.location.href="shop.html";return}}function Xe(){const n=document.getElementById("resetForm");n&&n.addEventListener("submit",function(a){a.preventDefault();const i=document.getElementById("resetEmail"),c=i.value.trim();if(!c){alert("Please enter your email address."),i.focus();return}if(!c.includes("@")||!c.includes(".")){alert("Please enter a valid email address."),i.focus();return}alert("If this were a live system, a password reset link would be sent to: "+c)})}function et(){const n=document.getElementById("smokeChecklist");if(!n)return;const a="smoke-test-checklist";let i={};try{i=JSON.parse(localStorage.getItem(a)||"{}")}catch(e){console.warn("Unable to read smoke test state",e),i={}}n.querySelectorAll('input[type="checkbox"][data-key]').forEach(e=>{const r=e.getAttribute("data-key");r&&i[r]&&(e.checked=!0),e.addEventListener("change",()=>{const o=e.getAttribute("data-key");o&&(i[o]=e.checked,localStorage.setItem(a,JSON.stringify(i)))})});const c=document.getElementById("resetChecklistBtn");c&&c.addEventListener("click",()=>{i={},localStorage.removeItem(a),n.querySelectorAll('input[type="checkbox"]').forEach(e=>{e.checked=!1})})}document.addEventListener("DOMContentLoaded",()=>{De(),fe(),Z(),je(),He(),ye(),Ge(),ze(),We(),Ye(),_e(),Ve(),Ke(),Qe(),Fe(),Ze(),Xe(),et()});
